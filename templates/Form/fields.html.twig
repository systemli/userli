{% block form_errors %}
    {% if errors|length > 0 %}
        <div id="{{ id }}_errors" class="bg-red-50 dark:bg-red-900/30 border border-red-200 dark:border-red-800 rounded-lg p-4 mb-4" role="alert">
            <div class="flex">
                {{ ux_icon('heroicons:x-circle-20-solid', {class: 'w-5 h-5 text-red-400 dark:text-red-500 mt-0.5 mr-3 flex-shrink-0'}) }}
                <div class="text-sm text-red-800 dark:text-red-200">
                    {% for error in errors %}
                        <p{% if not loop.last %} class="mb-1"{% endif %}>{{ error.message }}</p>
                    {% endfor %}
                </div>
            </div>
        </div>
    {% endif %}
{% endblock form_errors %}

{% block form_row %}
    <div class="mb-6">
        {{ form_label(form) }}
        {{ form_widget(form) }}
        {{ form_help(form) }}
        {{ form_errors(form) }}
    </div>
{% endblock form_row %}

{% block checkbox_row %}
    <div class="flex items-center">
        {{ form_widget(form) }}
        {{ form_label(form, null, {'label_attr': {'class': 'ml-2 block text-sm text-gray-700 dark:text-gray-300 cursor-pointer', 'for': id}}) }}
        {{ form_errors(form) }}
    </div>
{% endblock checkbox_row %}

{% block button_row %}
    <div>
        {{ form_widget(form) }}
    </div>
{% endblock button_row %}

{% block form_help %}
    {% if help is not empty %}
        <p id="{{ id }}_help" class="mt-1 text-xs text-gray-500 dark:text-gray-400">
            {{ help|trans({}, translation_domain) }}
        </p>
    {% endif %}
{% endblock form_help %}

{% block form_label %}
    {% if label is not same as(false) %}
        {% if not compound %}
            {% set label_attr = label_attr|merge({'for': id}) %}
        {% endif %}
        {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2')|trim}) %}
        {% if required %}
            {% set label_attr = label_attr|merge({'class': (label_attr.class|default('') ~ ' required')|trim}) %}
        {% endif %}
        {% if label is empty %}
            {%- if label_format is not empty -%}
                {% set label = label_format|replace({'%name%': name, '%id%': id}) %}
            {%- else -%}
                {% set label = name|humanize %}
            {%- endif -%}
        {% endif %}
        <label{% if label_attr %} {% set attr = label_attr %}{% for attrname, attrvalue in attr %} {{ attrname }}="{{ attrvalue }}"{% endfor %}{% endif %}>
            {{ label|trans({}, translation_domain) }}
            {% if required %}
                <abbr class="text-red-500 dark:text-red-400 ml-1 no-underline" title="{{ 'form.required'|trans }}" aria-label="{{ 'form.required'|trans }}">*</abbr>
            {% endif %}
        </label>
    {% endif %}
{% endblock form_label %}

{% block form_widget_simple %}
    {% set type = type|default('text') %}
    {% set suffix = attr.suffix|default('') %}

    {% if suffix is not empty %}
        {# Input with suffix #}
        <div class="w-full flex rounded-md shadow-sm focus-within:ring-2 focus-within:ring-blue-500 dark:focus-within:ring-blue-400 focus-within:ring-offset-2 dark:focus-within:ring-offset-gray-800 transition-colors">
            <input type="{{ type }}"
                   id="{{ id }}"
                   name="{{ full_name }}"
                   class="flex-1 min-w-0 px-3 py-3 border border-gray-300 dark:border-gray-600 rounded-l-md border-r-0 focus:outline-none focus:ring-0 focus:border-gray-300 dark:focus:border-gray-600 text-sm bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100"
                   {% if value is not empty %}value="{{ value }}"{% endif %}
                   {% if required %}required{% endif %}
                   {% if disabled %}disabled{% endif %} />
            <span class="inline-flex items-center px-3 py-3 border-t border-b border-r border-gray-300 dark:border-gray-600 bg-gray-50 dark:bg-gray-600 text-gray-500 dark:text-gray-300 text-sm rounded-r-md whitespace-nowrap">
                {{ suffix }}
            </span>
        </div>
    {% else %}
        {# Normal input without suffix #}
        {% set attr = attr|merge({
            'class': (attr.class|default('') ~ ' w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 transition-colors duration-200 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500')|trim
        }) %}
        <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
    {% endif %}
{% endblock form_widget_simple %}

{% block password_widget %}
    {% set type = type|default('password') %}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 transition-colors duration-200 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500')|trim
    }) %}
    <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
{% endblock password_widget %}

{% block email_widget %}
    {% set type = type|default('email') %}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 transition-colors duration-200 bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500')|trim
    }) %}
    <input type="{{ type }}" {{ block('widget_attributes') }} {% if value is not empty %}value="{{ value }}" {% endif %}/>
{% endblock email_widget %}

{% block textarea_widget %}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' w-full px-4 py-3 border border-gray-300 dark:border-gray-600 rounded-lg focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:border-blue-500 dark:focus:border-blue-400 transition-colors duration-200 resize-y bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 placeholder-gray-400 dark:placeholder-gray-500')|trim
    }) %}
    <textarea {{ block('widget_attributes') }}>{{ value }}</textarea>
{% endblock textarea_widget %}

{% block checkbox_widget %}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' custom-checkbox')|trim
    }) %}
    <input type="checkbox" {{ block('widget_attributes') }}{% if value is defined %} value="{{ value }}"{% endif %}{% if checked %} checked="checked"{% endif %} />
{% endblock checkbox_widget %}

{% block choice_widget_expanded %}
    {% if multiple %}
        <div class="space-y-3">
            {% for child in form %}
                <div class="flex items-center">
                    {{ form_widget(child, {'attr': {'class': 'custom-checkbox'}}) }}
                    {{ form_label(child, null, {
                        'label_attr': {'class': 'ml-3 text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer'},
                        'translation_domain': translation_domain
                    }) }}
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="space-y-3">
            {% for child in form %}
                <div class="flex items-center">
                    {{ form_widget(child, {'attr': {'class': 'custom-checkbox'}}) }}
                    {{ form_label(child, null, {
                        'label_attr': {'class': 'ml-3 text-sm font-medium text-gray-700 dark:text-gray-300 cursor-pointer'},
                        'translation_domain': translation_domain
                    }) }}
                </div>
            {% endfor %}
        </div>
    {% endif %}
{% endblock choice_widget_expanded %}

{% block button_widget %}
    {% if label is empty %}
        {%- if label_format is not empty -%}
            {% set label = label_format|replace({'%name%': name, '%id%': id}) %}
        {%- elseif label is same as(false) -%}
            {% set label = false %}
        {%- else -%}
            {% set label = name|humanize %}
        {%- endif -%}
    {% endif %}
    {% set attr = attr|merge({
        'class': (attr.class|default('') ~ ' px-6 py-3 bg-blue-600 dark:bg-blue-500 text-white font-medium rounded-lg hover:bg-blue-700 dark:hover:bg-blue-600 focus:ring-2 focus:ring-blue-500 dark:focus:ring-blue-400 focus:ring-offset-2 dark:focus:ring-offset-gray-800 transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed')|trim
    }) %}
    <button type="{{ type|default('button') }}" {{ block('button_attributes') }}>
        {% if label is not same as(false) %}{{ label|trans({}, translation_domain) }}{% endif %}
    </button>
{% endblock button_widget %}

{% block submit_widget %}
    {% set type = type|default('submit') %}
    {{ block('button_widget') }}
{% endblock submit_widget %}
