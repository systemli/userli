{% form_theme confirmForm 'Form/fields.html.twig' %}

<div class="mb-6">
    <h2 class="text-xl font-semibold text-gray-900 mb-4">
        {{ "account.twofactor.enable-lead"|trans }}
    </h2>
    <div class="flex justify-center mb-6">
        <img src="{{ url('user_twofactor_qrcode') }}" alt="QR Code for TOTP App" class="border border-gray-300 rounded-lg p-2">
    </div>
</div>

{{ form_start(confirmForm, {'attr': {'class': 'space-y-6'}}) }}
{{ form_errors(confirmForm) }}

<div>
    {{ form_label(confirmForm.totpSecret, null, {'label_attr': {'class': 'block text-sm font-medium text-gray-700 mb-2'}}) }}
    {% set secret_errors_content = form_errors(confirmForm.totpSecret) %}
    {% if secret_errors_content and secret_errors_content|trim|length > 0 %}
        <div class="text-sm text-red-600 mb-2">
            {{ secret_errors_content }}
        </div>
    {% endif %}
    {{ form_widget(confirmForm.totpSecret, {
        'attr': {
            'class': 'w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors duration-200',
            'autofocus': '',
            'placeholder': 'form.twofactor-login-placeholder'|trans,
            'autocomplete': 'off'
        }
    }) }}
</div>

<div class="pt-4">
    {{ form_widget(confirmForm.submit, {
        'attr': {
            'class': 'w-full px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-colors duration-200'
        }
    }) }}
</div>

{{  form_end(confirmForm) }}
