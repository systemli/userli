<!DOCTYPE html>
<html lang="{{ app.request.locale }}" class="dark">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %}{{ setting('app_name') }} - {{ "index.title"|trans }}{% endblock %}</title>

    {% block head_style %}
        <link rel="stylesheet" href="{{ asset('build/app.css') }}">
    {% endblock %}

    {% block head_script %}
        <script src="{{ asset('build/app.js') }}"></script>
    {% endblock %}

    {# Dark mode initialization - respects system preference and saved preference #}
    <script>
        (function() {
            const savedTheme = localStorage.getItem('theme');
            if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
                document.documentElement.classList.add('dark');
            } else {
                document.documentElement.classList.remove('dark');
            }
        })();
    </script>
</head>
<body class="bg-gray-50 dark:bg-gray-900 transition-colors duration-200">
    {# Skip link for keyboard users #}
    <a href="#main-content" class="sr-only focus:not-sr-only focus:absolute focus:top-4 focus:left-4 focus:z-[60] focus:px-4 focus:py-2 focus:bg-white focus:dark:bg-gray-800 focus:text-gray-900 focus:dark:text-gray-100 focus:rounded-lg focus:shadow-lg focus:ring-2 focus:ring-blue-500">
        {{ 'accessibility.skip-to-content'|trans }}
    </a>

    {% block navbar %}
        {% include '_navbar.html.twig' %}
    {% endblock %}

    {% block container %}
        <main id="main-content" class="max-w-7xl mx-auto px-4 py-6">
            {% block flashes %}
                {% include '_flashes.html.twig' %}
            {% endblock flashes %}

            {% block notifications %}
                {% include '_notifications.html.twig' %}
            {% endblock notifications %}

            {% block content %}
                {# Header section with standardized title and subtitle structure #}
                <div class="mb-8 sm:mb-12">
                    <div class="text-center">
                        {% block page_title %}
                            <h1 class="text-3xl sm:text-4xl font-bold text-gray-900 dark:text-gray-100 mb-2">
                                {{ block('subtitle')|raw }}
                            </h1>
                        {% endblock %}

                        {% block page_subtitle %}
                            {# Optional subtitle block that child templates can override #}
                        {% endblock %}
                    </div>
                </div>

                {% block page_content %}
                    {# Main content goes here #}
                {% endblock %}
            {% endblock content %}

        </main>
    {% endblock %}

    {% block foot_script %}
    {% endblock foot_script %}
</body>
</html>
