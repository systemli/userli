{% extends 'base_step.html.twig' %}

{% block title %}{{ domain }} - {{ "registration.recovery-token-headline"|trans }}{% endblock %}

{% form_theme form 'Form/fields.html.twig' %}

{% block step_title %}{{ "registration.recovery-token-headline"|trans }}{% endblock %}

{% block step_icon %}
    <div class="w-16 h-16 bg-green-100 rounded-xl flex items-center justify-center">
        <!-- Heroicon: check-circle -->
        {{ ux_icon('heroicons:check-circle', {'class': 'w-8 h-8 text-green-600'}) }}
    </div>
{% endblock %}

{% block step_description %}
    <p class="text-gray-600">
        {{ "recovery-token.created-info"|trans }}
    </p>
{% endblock %}

{% block step_content %}
    {% include 'Recovery/show_recovery_token.html.twig' %}

    <div class="mt-8">
        {% include 'Recovery/recovery_token_notes.html.twig' %}
    </div>

    <script>
        function copyRecoveryToken(text, button) {
            navigator.clipboard.writeText(text).then(function() {
                // Update button text temporarily to show success
                const originalContent = button.innerHTML;
                button.innerHTML = `
                    {{ ux_icon('heroicons:check', {'class': 'w-4 h-4 mr-1'}) }}
                    <span>{{ "button.copied"|trans }}</span>
                `;
                button.classList.add('text-green-600', 'border-green-300', 'bg-green-50');
                button.classList.remove('text-gray-600', 'border-gray-300', 'bg-gray-50');

                setTimeout(function() {
                    button.innerHTML = originalContent;
                    button.classList.remove('text-green-600', 'border-green-300', 'bg-green-50');
                    button.classList.add('text-gray-600', 'border-gray-300', 'bg-gray-50');
                }, 2000);
            }).catch(function(err) {
                console.error('{{ "error.copy-failed"|trans }}', err);
            });
        }
    </script>
{% endblock %}
